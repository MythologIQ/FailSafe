---
name: ql-bootstrap
description: Initialize QoreLogic A.E.G.I.S. DNA for a new project - creates CONCEPT, ARCHITECTURE_PLAN, and META_LEDGER with genesis hash.
arguments:
  - name: project_name
    description: Name of the project being initialized
    required: false
---

# /ql-bootstrap - Project DNA Seeder

<skill>
  <trigger>/ql-bootstrap</trigger>
  <phase>ALIGN + ENCODE</phase>
  <persona>Governor</persona>
  <output>docs/CONCEPT.md, docs/ARCHITECTURE_PLAN.md, docs/META_LEDGER.md</output>
</skill>

## Purpose

Physically seeds the Merkle-chain DNA and scaffolding for a new dataset. This is the **genesis** of the A.E.G.I.S. lifecycle.

## Execution Protocol

### Step 1: Identity Activation
You are now operating as **The QoreLogic Governor**.

### Step 2: Environment Audit

Check for existing QoreLogic DNA:

```
Glob: docs/META_LEDGER.md
Glob: .agent/staging/
```

**INTERDICTION**: If `docs/META_LEDGER.md` exists:
```
ABORT
Report: "Integrity Violation: Genesis already exists. Use /ql-status to resume."
```

### Step 3: Create Directory Structure

Ensure required directories exist:
```
.agent/
.agent/staging/
docs/
```

### Step 4: ALIGN (The "Why")

Create `docs/CONCEPT.md`:

```markdown
# Project Concept

## Why (One Sentence)
[Single sentence explaining the purpose of this project/feature]

## Vibe (Three Keywords)
1. [Keyword 1 - e.g., "Minimal"]
2. [Keyword 2 - e.g., "Secure"]
3. [Keyword 3 - e.g., "Traceable"]

## Anti-Goals (What This Is NOT)
- [Explicit exclusion 1]
- [Explicit exclusion 2]

---
*Generated by QoreLogic A.E.G.I.S. Bootstrap*
```

**Guidance**: Ask the user to provide:
- One sentence "Why" (if they can't explain it simply, reject the task)
- Three "Vibe" keywords that capture the design philosophy

### Step 5: ENCODE (The "Promise")

Create `docs/ARCHITECTURE_PLAN.md`:

```markdown
# Architecture Plan

## Risk Grade: [L1 | L2 | L3]

### Risk Assessment
- [ ] Contains security/auth logic → L3
- [ ] Modifies existing APIs → L2
- [ ] UI-only changes → L1

## File Tree (The Contract)

```
src/
├── [planned file 1]
├── [planned file 2]
└── [planned directory]/
    └── [planned file 3]
```

## Interface Contracts

### [Component Name]
- **Input**: [types/parameters]
- **Output**: [return type]
- **Side Effects**: [state changes, API calls]

## Data Flow

```
[Entry Point] → [Processing] → [Output]
```

## Dependencies

| Package | Justification | Vanilla Alternative? |
|---------|---------------|---------------------|
| [name] | [why needed] | [yes/no - if yes, why not used] |

## §4 Razor Pre-Check

- [ ] All planned functions ≤ 40 lines
- [ ] All planned files ≤ 250 lines
- [ ] No planned nesting > 3 levels

---
*Blueprint sealed. Awaiting GATE tribunal.*
```

### Step 6: Initialize META_LEDGER

Create `docs/META_LEDGER.md`:

```markdown
# QoreLogic Meta Ledger

## Chain Status: ACTIVE
## Genesis: [ISO timestamp]

---

### Entry #1: GENESIS

**Timestamp**: [ISO 8601]
**Phase**: BOOTSTRAP
**Author**: Governor
**Risk Grade**: [from ARCHITECTURE_PLAN]

**Content Hash**:
```
SHA256(CONCEPT.md + ARCHITECTURE_PLAN.md)
= [calculated hash]
```

**Previous Hash**: GENESIS (no predecessor)

**Decision**: Project DNA initialized. Lifecycle: ALIGN/ENCODE complete.

---

*Chain integrity: VALID*
*Next required action: /ql-audit (if L2/L3) OR /ql-implement (if L1)*
```

### Step 7: Calculate Genesis Hash

```python
import hashlib

# Read the content of both files
concept_content = read_file("docs/CONCEPT.md")
architecture_content = read_file("docs/ARCHITECTURE_PLAN.md")

# Calculate genesis hash
combined = concept_content + architecture_content
genesis_hash = hashlib.sha256(combined.encode()).hexdigest()
```

### Step 8: Routing Decision

Based on Risk Grade:

| Grade | Action |
|-------|--------|
| L1 | "DNA Seeded. Low risk. Proceed to /ql-implement." |
| L2 | "DNA Seeded. Logic changes detected. Invoke /ql-audit before implementation." |
| L3 | "DNA Seeded. CRITICAL: Security path detected. /ql-audit MANDATORY. Dataset LOCKED." |

### Step 9: Final Report

```markdown
## Bootstrap Complete

**Project**: [name]
**Genesis Hash**: [first 8 chars]...
**Risk Grade**: [L1/L2/L3]
**Lifecycle Stage**: ENCODED

### Created Artifacts
- docs/CONCEPT.md ✓
- docs/ARCHITECTURE_PLAN.md ✓
- docs/META_LEDGER.md ✓

### Next Action
[Based on risk grade routing]

---
*DNA Seeded. Dataset Locked. Auto-Router Active.*
```

## Constraints

- **NEVER** bootstrap over existing DNA (check first)
- **NEVER** skip the "Why" documentation
- **NEVER** assign L1 to anything touching security/auth
- **ALWAYS** calculate and record genesis hash
- **ALWAYS** require /ql-audit for L2/L3 before implementation
